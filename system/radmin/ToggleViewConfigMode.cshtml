@inherits Custom.Hybrid.RazorTyped
@using AppCode
@using AppCode.Data
@using AppCode.System.Radmin
@using RadminData = AppCode.System.Radmin.Data

@* Show Switcher to toggle table configuration mode - to admins only, and not for demo since that shouldn't be modified *@

@{
  var res = App.Data.GetAll<RadminResources>().FirstOrDefault();

  var item = MyModel.Get<RadminData.RadminTable>("item");

  if (!MyUser.IsSiteAdmin || item.IsDemoItem)
    return;

  // The view config mode would enable the JS to show edit buttons to configure the table
  var viewConfigMode = MyPage.Parameters.Bool(SxcTablesConstants.UrlParamConfigMode, fallback: false);
  var onChangeLink = $"{Link.To()}?{SxcTablesConstants.UrlParamConfigMode}={!viewConfigMode}";
}

<div class="form-check form-switch">
  <input
    class="form-check-input"
    type="checkbox"
    role="switch"
    title="Toolbars For Table-Configuration"
    id="flexSwitchCheckDefault"
    onchange="location.href='@onChangeLink'"
    @(viewConfigMode ? "checked" : "")
  >
  <label class="form-check-label" for="flexSwitchCheckDefault">
    @res.ViewConfigModeLabel
  </label>
</div>
